\documentclass[a4wide, 11pt]{article}
\usepackage{a4, fullpage}
\setlength{\parskip}{0.3cm}
\setlength{\parindent}{0cm}

% This is the preamble section where you can include extra packages etc.

\begin{document}

\title{MAlice Language Specification}

\author{Alex Rozanski and Thomas Rooney}

\date{Last Updated: \today}         % inserts today's date

\maketitle            % generates the title from the data above

\section{Introduction}

This is our language specification for the MAlice programming language, which encapsulates our understanding and interpretation of the syntax and semantics of the language. This syntax and these semantics will form the basis for our compiler for MAlice programs.

Our definitions of syntax are provided in a semi-formal way: we are using a combination of Extended Backus-Naur Form (EBNF) and Augmented Backus-Naur form (ABNF). We are using the repetition syntax from EBNF, such as expressions surrounded by left and right braces (`{' and `}') which denotes zero or more occurrences of the expression, and left and right square brackets (`[' and `]') which denote optional expressions.

We are also using \texttt{ALPHA} and \texttt{DIGIT} from ABNF. \texttt{ALPHA} represents the letters A--Z and a--z and \texttt{DIGIT} represents the digits 0--9. This allows our specification to be more succinct and easier to read.

% This is an \emph{introductory comment}.
% \LaTeX\ can typeset some very complex documents, but it is also
% \textbf{quite easy to get started}.
% Try playing around with this file and see. 
% Don't worry that this page looks very spaced out,
% \LaTeX\ arranges the page for you (much less work to do than in Word!)
% so if there was more content it would close up the gaps.

% To start a new paragraph just leave a blank line.
% If you do not like numbered sections, use the \texttt{section*\{...\}}
% environment instead.


% To include maths formulas in text put them between \$ symbols like this
% $f(x) = x \times 5$.
% Or to display a formula on a line on its own you do this:
% \[
%     g(y) = y^2
% \]
\section{Types}

\begin{verbatim}
Type -> "number" | "letter"
FunctionType -> Type | "looking-glass"
\end{verbatim}

MAlice is a strongly typed language. Its primitive types are \texttt{number} and \texttt{letter}, as well as the special \texttt{looking-glass} type which is analogous to a \texttt{void} type as in C-style languages. \texttt{looking-glass} is only used when in function declarations to denote that a function does not return a value.

The \texttt{number} type is used to represent signed integers, and its size is implementation-defined. The \texttt{letter} type is used to represent the letters A-Z and a-z, where letters are encoded upwards from `A' as 0 to `Z' (25), then `a' as 26 to `z' (51). \texttt{letter} variables are stored in a single byte.

\section{Functions and Programs}

\begin{verbatim}
Function -> "The" FunctionType Identifier ArgumentList BlockUnit

FunctionType -> Type | "looking-glass"
ArgumentList -> "(" [DeclarationList] ")"
BlockUnit -> "opened" StatementList "closed"}
\end{verbatim}

MAlice allows multiple functions to be declared and implemented. Functions begin with `The' followed by the return type, a name and a list of zero or more parameters. This is then followed by `opened', a list of statements which constitute the body, and the closing `closed' keyword. Functions are declared in the global scope and cannot be nested.

A MAlice program is comprised of one or more function declarations. The special function \texttt{hatta} is the entry point for MAlice programs (similar to \texttt{main} in C programs) and it is a semantic error to have this function declaration omitted.

\section{Statements}

Function bodies in MAlice are comprised of zero or more statements. Statements are separated by either a full-stop, comma or `then'. However, the last statement in a list of one or more statements must be followed by a full stop. A single full stop is both an invalid statement and list of statements.
  
\section{Expressions}

Expressions are defined recursively, and are only well-defined over numerical values.

\section{Operators}

There are two types of operators that Malice allows. These are the Unary Operators, and Binary Operators, named due to their acting respective on one (as a prefix) or two (in the middle) expression.

These Operators, and definitions are:

\begin{itemize}

\item
Unary Operator: `$\sim$' - This essentially means Bitwise NOT, up to the largest BIT + 1.
i.e. \vspace{0.75mm} \hspace{25mm} \hspace{12mm} if Expr is equal to 7 == (+)0111, ~Expr is equal to -8 == (-)1000
or \vspace{0.75mm} \hspace{25mm} \hspace{13mm} if Expr is equal to  0 == (+)0, ~Expr is equal to -1 == (-)1
\item
Binary Operator `/' \hspace{2mm}- This is the Mathematical Division Operator. i.e. 8 / 2 = 4
\item
Binary Operator `+' \hspace{1mm}- The Mathematical Plus Operator. i.e. 2 + 3 = 5
\item 
Binary Operator `-'\hspace{3mm} - The Mathematical Minus Operator. i.e. 4 - 2 = 2
\item
Binary Operator `*'\hspace{2.5mm} - The Mathematical Multiplication Operator. i.e. 2 * 4 = 8
\item
Binary Operator `\char`\%'\hspace{1mm} - The Mathmatical Modulus Operator. i.e.  17 % 3 = 2

\end{itemize}


\section{Variable Assignment}

\begin{verbatim}
Assignment -> Identifier "became" Expression
\end{verbatim}

\section {Returning}

\section{Declarations}

\begin{verbatim}
  Declaration -> Identifier "was a" Type
  DeclarationList -> Declaration [{"," Declaration ["too"]} "and" Declaration ["too"]]
\end{verbatim}

Lists of variable declarations consist of single variable declarations separated by a comma. The only exception to this is the last variable declaration, which is preceded by an `and' and no comma. For example, this is a valid variable declaration list:

\begin{verbatim}
x was a number, y was a letter and z was a number
\end{verbatim}

whilst this:

\begin{verbatim}
x was a number, y was a letter, z was a number
\end{verbatim}

is not.

Where there are one or more consecutive declarations of variables which share the same type, the second and later declarations can be optionally postfixed with `too', as in:

\begin{verbatim}
p was a letter, q was a number and r was a number too
\end{verbatim}

It is a semantic error to append `too' to a declaration for a variable whose type is different to that of the previous variable declaration's type, as in:

\begin{verbatim}
p was a letter, q was a number too and r was a number
\end{verbatim}

\section{Assignment}

Variable assignment is also designed to closely mirror the grammatical structure of the English language.

\section{BNF Grammar} 

Beginning here, we look at the formalised BNF Grammar. This utilises constructs from EBNF and ABNF as explained in the introduction to this specification.

\begin{verbatim}

Declaration     -> Identifier "was a" Type
DeclarationList -> Declaration [{"," Declaration ["too"]} "and" Declaration ["too"]]

Assignment      -> Identifier "became" Expression
AssignmentList  -> Assignment [{"and" Assignment} "but" Assignment]

BlockUnit       -> "opened" StatementList "closed"

StatementList   -> ""
                 | Statement "."
                 | Statement Split StatementList
               
Statement       -> DeclarationList
                 | AssignmentList
                 | Expression "said Alice"
                 | Identifier "ate"
                 | Identifier "drank"

Split           -> "."
                 | ","
                 | "then"

Term            -> Identifier
                 | Number
                 | UnaryOperator (Term | Expression)
Expression      -> Expression BinaryOperator Term

Program         -> Function+
Function        -> "The" FunctionType Identifier ArgumentList BlockUnit

FunctionType    -> Type
                 | "looking-glass"
ArgumentList    -> "(" [DeclarationList] ")"

BinaryOperator  -> "+"
                 | "-"
                 | "*"
                 | "/" 
                 | "%"

UnaryOperator   -> "~" 

Value           -> Number | Letter

Letter          -> ALPHA

Number          -> ["-"] DIGIT+

Type            -> "number"
                 | "letter"

\end{verbatim}


% \section{Semantics}

% Here is a numbered list.

% \begin{enumerate}

%     \item
%     This is item 1.
    
%     \item
%     And this is item 2.
    
% \end{enumerate}

% And here is a bulleted list.

% \begin{itemize}

%     \item
%     The parts of the list are called items here too.
    
% \end{itemize}

% Finally for this document, if you want to include a reference
% then you put it into a \texttt{thebibliography\{...\}}
% environment (see below in source file) and then 
% cite it like this \cite{lamport94}
% (you will need to run \texttt{latex} twice to get it to process the citation),
% or you can use BibTex but that is probably overkill for now.

% \begin{thebibliography}{9}

% \bibitem{lamport94}
%   Leslie Lamport,
%   \emph{\LaTeX: A Document Preparation System}.
%   Addison Wesley, Massachusetts,
%   2nd Edition,
%   1994.

% \end{thebibliography}


\end{document}
