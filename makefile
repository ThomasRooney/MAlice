CC=g++
ANTLR_SEARCH_PATHS=-I grammar/antlr/include -I grammar/antlr/libantlr3c

all: antlr malice

# Main MAlice target
malice: malice_lexer malice_parser
	$(CC) main.cpp MAliceLexer.o MAliceParser.o  grammar/antlr/libantlr3c/.libs/libantlr3c.a -o compile

# Building the lexer and parser generated by ANTLR
antlr: 
	sh ./configureantlr.sh

malice_lexer: antlr
	$(CC) $(ANTLR_SEARCH_PATHS) -c grammar/output/MAliceLexer.c

malice_parser: antlr
	$(CC) $(ANTLR_SEARCH_PATHS) -c grammar/output/MAliceParser.c

clean:
	@sh ./cleanantlr.sh
.PHONY: clean
